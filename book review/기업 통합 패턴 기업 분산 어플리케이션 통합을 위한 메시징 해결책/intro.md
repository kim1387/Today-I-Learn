# 기업 분산 어플리케이션

목차

## 들어가며

일반적으로 어플리케이션은 단독으로 운영되지 않는다. 어플리케이션들은 서로 통합될 떄 더 나은 기능을 수행하므로 github 서버, kakao 서버, 결제PG 서버 등 여러 외부 어플리케이션과 함께 연결되어서 운영이 된다. 하지만 다음과 같은 근본적인 문제 해결이 필요하다.

## 문제점

### 네트워크는 신뢰할 수 없다.

통신을 할 때 전화선, 라우터, LAN, 위성 등을 경유해 데이터가 전달이 된다. 

→이는 지연이 되거나 실패할 가능성이 크다.

### 네트워크 속도는 느리다.

네트워크를 통한 데이터 전송은 로컬 method 호출 보다 매우 느리다.

→ 외부 서비스를 동일 서버 내 메서드를 호출 듯 응답을 기다리면 

    시스템 전체 성능 저하로 이어진다.

### 어플리케이션은 서로 다르다.

통합 환경에서는 서비스는 다양한 언어, OS 등으로 설계가 된다.

→ 서비스 간 메시지 포맷이 다르다.

→ 다른 서비스와 메시지 포맷을 맞출 필요가 있다.

### 변경은 피할 수가 없다.

서비스는 시간이 지남에 따라 변경된다.

→ 연결된 서비스의 변경을 대응할 수 있어야 한다.

→ 시스템 간의 결합도를 낮춰서 영향을 줄이거나 없애야한다. (loose coupling)

## 해결 방법

### 파일 전송

한 서비스가 파일을 쓰고 다른 다른 서비스가 나중에 읽는다.

→ 단점: sync 문제를 해결해야 한다.

### 공유 데이터베이스

서비스들이 1개의 데이터베이스 스키마를 공유 한다.

데이터를 공유하는 데이터베이스이므로 데이터를 이전할 필요가 없다.

### 원격 프로시저 호출

서비스는 다른 서비스들이 원격에서 접근할 수 있게 rpc와 같은 기능을 노출시킨다. 통신은 동기적이고 실시간에 발생한다.

→  책에는 네트워크 통신이라서 속도가 느리고 안전성이 보장되어 있지 않다고 나와있다.

→ 최근에는 구글에서 만든 gRPC가 많이 사용되고 있는 것으로 보아 어느 정도 안정성과 속도가 보장되어 있다고 볼 수 있다.

### messaging

서비스가 메시지를 공통 message channel에 publish하면 subscribe하고 있던 다른 서비스들이 언제든 채널에서 메시지를 읽을 수 있다. 특징은 비동기적 통신을 한다.

# [참고 문서]

기업 통합 패턴: 기업 분산 어플리케이션 통합을 위한 메시징 해결책